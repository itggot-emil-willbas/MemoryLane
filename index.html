<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .b0,.b1,.b2,.b3 {
            padding:50px;
            background-color:lightgrey;
            border:1px black solid;
        width: 48%;
        margin-right:5px;
        margin-top:5px;
    }
    .color0 {
        background-color:pink;
    }
    .color1 {
        background-color:purple;
    }
    .color2 {
        background-color:lime;
    }
    .color3 {
        background-color:cornflowerblue;
    }
    </style>
</head>
<body>
    <div class="container">
        <button class="btn-primary" id="btn">Start</button>
        <a href="#">Klickat här för tusan!</a>
        <hr>
        <button class="b0" onclick="gameClick(this)"></button>
        <button class="b1" onclick="gameClick(this)"></button>
        <button class="b2" onclick="gameClick(this)"></button>
        <button class="b3" onclick="gameClick(this)"></button>
        
        



    </div>
    <script type="text/javascript">
        var arrayMedSiffror = [0,1,2,3];
        var shuffledArray;
        var sequenceAmount = 1;
        var facitTime = 1000;
        var startReady = false; //Set to true on restart
        var i = 0;

        var btn = document.getElementById("btn")
        btn.addEventListener('click',function(){start();})

        function start() {
            //alert(sequenceAmount)
            //blandaArray()
            shuffledArray = shuffle(arrayMedSiffror);
            showColorSequence(shuffledArray)
            };

        function showColorSequence(numbers) {
                //Prevent double-clicks  
                document.getElementById("btn").disabled = true;
                number = numbers[i];
                 //hitta knapp med nummer
                var element = document.querySelector(".b" + number)
                 //ändra class i 
                 element.classList.add("color" + number);

            
            setTimeout(function(){
                var element = document.querySelector(".b" + number)
                element.classList.remove("color" + number);
                i++;
                if (i < numbers.length){
                    showColorSequence(arrayMedSiffror)
                }else{
                    i = 0;
                    //Gör knappen klickbar igen
                    document.getElementById("btn").disabled = false;
                    startReady = true;
                };
            },facitTime)
        }

        function shuffle(a) {
    var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}

         //jag klickar
         //check om först i Shuffledarray
         //if true -> fortsätt
         //if false -> starta om

         function gameClick(obj) {
             //alert(obj.className);
             if (startReady){
                var numberCheck = obj.className.substring(1)
                parseInt(numberCheck);
                console.log(numberCheck)
                if (numberCheck == shuffledArray[0]) {
                    shuffledArray.shift();
                    console.log(shuffledArray)
                    if (shuffledArray.length == 0){
                        console.log("Game over! Great work!")
                        if (confirm("Great work! Start over?")){
                            window.location.reload();//Vill inte detta :)
                        }
                    }

                }else{
                    //start over if array NOT is empty
                    if (shuffledArray.length > 0){
                    console.log("Wrong number")
                    }else{
                        console.log("Game over! Great work!")
                    }
                }
                
             }
         }


    </script>
</body>
</html>